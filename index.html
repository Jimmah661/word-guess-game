<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
</head>

<body>
  <main>
    <!-- This is where the structure will be written -->
    <section
      style="width: 800px; height: 100vh; margin: 0 auto; background-color: black; color: white; border: 4px solid grey; padding: 10px">
      <h1 style="text-align: center; font-family: 'arial', 'Helvetica'">Sci-Fi Word Guess</h1>

      <span id="test">Press Enter to start the game!</span><br>
      <span id="dashes"></span><br>
      <span id="chances"></span><br>
      <span id="wins"></span><br>
      <span id="losses"></span>

      <!-- Game content goes here -->



    </section>
  </main>

  <!-- javascripting starts here -->
  <script type="text/javascript">
    // See all updated script below this line, Previous script was Garbage
    // All praise JS Bin

    var wordArray = ['borg', 'transporter', 'dilithium', 'lightsaber', 'force', 'starship', 'enterprise'];
    var chosenWord
    var letterArray = [];
    var dashArray = [];
    var gameState = false;
    var keyPress;
    var chances = 10;
    var remainingChances = document.getElementById("chances");
    var wins = 0;
    var winTotal = document.getElementById("wins");
    var losses = 0;
    var lossesTotal = document.getElementById("losses");


    document.onkeyup = function (event) {
      keyPress = event.key;
      keyCode = event.keyCode;
      console.log(keyCode);


      if (keyPress === "Enter" && gameState === false) {

        //if there is no game in process it kicks off the startGame function
        //It then changes the gameState to true to prevent this function running again till the game is finished
        var message = document.getElementById("test");
        message.textContent = "Game Start!";
        remainingChances.textContent = "Remaining Chances: " + chances;
        winTotal.textContent = "Wins: " + wins;
        lossesTotal.textContent = "Losses: " + losses;
        gameState = true;


        // Choose a word from the array of possible choices
        chosenWord = wordArray[Math.floor(Math.random() * wordArray.length)];

        // Then we take the chosenWord and convert to an array of all letters
        letterArray = Array.from(chosenWord);

        // convert the letter array to an array of dashes
        for (i = 0; i < letterArray.length; i++) {
          dashArray.push("_");
        }

        // display those dashes
        dashes.textContent = dashArray;
      }


      // PLAY AREA
      //Game Playing
      if (event.keyCode > 64 && event.keyCode < 91 && gameState === true) {
        if (letterArray.indexOf(keyPress.toLowerCase()) !== -1) {
          // check the letterArray to see if the letter is in the array
          for (i = 0; i < letterArray.length; i++) {
            if (letterArray[i] === keyPress.toLowerCase()) {
              dashArray[i] = keyPress.toUpperCase();
              dashes.textContent = dashArray;
            }
          }
        } else {
          // if letter is not in the letterArray then it will reduce the remaining chances by one
          chances = chances - 1;
          remainingChances.textContent = chances;
        }
      }

      // Win/Loss scenarios
      if ((dashArray.indexOf("_") === -1) && (gameState === true)) {
        var message = document.getElementById("test");
        alert("You Win!");
        wins = wins + 1;
        winTotal.textContent = "Wins: " + wins;
      }

      else if ((chances === 0) && (gameState === true)) {
        var message = document.getElementById("test");
        alert("You Lose :(");
        losses = losses + 1;
        lossesTotal.textContent = "Losses: " + losses;
      }
      // END PLAY AREA




      //End Functional area
    }
  </script>
</body>

</html>